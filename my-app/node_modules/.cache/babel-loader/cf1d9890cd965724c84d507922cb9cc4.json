{"ast":null,"code":"function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport * as React from 'react';\nimport withNavigation from './withNavigation';\nconst EventNameToPropName = {\n  willFocus: 'onWillFocus',\n  didFocus: 'onDidFocus',\n  willBlur: 'onWillBlur',\n  didBlur: 'onDidBlur'\n};\nconst EventNames = Object.keys(EventNameToPropName);\n\nclass NavigationEvents extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"getPropListener\", eventName => this.props[EventNameToPropName[eventName]]);\n  }\n\n  componentDidMount() {\n    // We register all navigation listeners on mount to ensure listener stability across re-render\n    // A former implementation was replacing (removing/adding) listeners on all update (if prop provided)\n    // but there were issues (see https://github.com/react-navigation/react-navigation/issues/5058)\n    this.subscribeAll();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.navigation !== prevProps.navigation) {\n      this.removeAll();\n      this.subscribeAll();\n    }\n  }\n\n  componentWillUnmount() {\n    this.removeAll();\n  }\n\n  subscribeAll() {\n    this.subscriptions = {};\n    EventNames.forEach(eventName => {\n      this.subscriptions[eventName] = this.props.navigation.addListener(eventName, (...args) => {\n        const propListener = this.getPropListener(eventName);\n        return propListener && propListener(...args);\n      });\n    });\n  }\n\n  removeAll() {\n    EventNames.forEach(eventName => {\n      this.subscriptions[eventName].remove();\n    });\n  }\n\n  render() {\n    return null;\n  }\n\n}\n\nexport default withNavigation(NavigationEvents);","map":{"version":3,"sources":["NavigationEvents.js"],"names":["EventNameToPropName","willFocus","didFocus","willBlur","didBlur","EventNames","Object","React","componentDidMount","componentDidUpdate","prevProps","componentWillUnmount","eventName","subscribeAll","propListener","removeAll","render","withNavigation"],"mappings":";;;;;;;;;;;;;;;AAAA,OAAO,KAAP,KAAA,MAAA,OAAA;AACA,OAAA,cAAA,MAAA,kBAAA;AAEA,MAAMA,mBAAmB,GAAG;AAC1BC,EAAAA,SAAS,EADiB,aAAA;AAE1BC,EAAAA,QAAQ,EAFkB,YAAA;AAG1BC,EAAAA,QAAQ,EAHkB,YAAA;AAI1BC,EAAAA,OAAO,EAAE;AAJiB,CAA5B;AAOA,MAAMC,UAAU,GAAGC,MAAM,CAANA,IAAAA,CAAnB,mBAAmBA,CAAnB;;AAEA,MAAA,gBAAA,SAA+BC,KAAK,CAApC,SAAA,CAA+C;AAAA,EAAA,WAAA,CAAA,GAAA,IAAA,EAAA;AAAA,UAAA,GAAA,IAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,iBAAA,EAmB1BK,SAAD,IAAe,KAAA,KAAA,CAAWZ,mBAAmB,CAnBlB,SAmBkB,CAA9B,CAnBY,CAAA;AAAA;;AAC7CQ,EAAAA,iBAAiB,GAAG;AAClB;AACA;AACA;AACA,SAAA,YAAA;AACD;;AAEDC,EAAAA,kBAAkB,CAAA,SAAA,EAAY;AAC5B,QAAI,KAAA,KAAA,CAAA,UAAA,KAA0BC,SAAS,CAAvC,UAAA,EAAoD;AAClD,WAAA,SAAA;AACA,WAAA,YAAA;AACD;AACF;;AAEDC,EAAAA,oBAAoB,GAAG;AACrB,SAAA,SAAA;AACD;;AAIDE,EAAAA,YAAY,GAAG;AACb,SAAA,aAAA,GAAA,EAAA;AAEAR,IAAAA,UAAU,CAAVA,OAAAA,CAAoBO,SAAD,IAAe;AAChC,WAAA,aAAA,CAAA,SAAA,IAAgC,KAAA,KAAA,CAAA,UAAA,CAAA,WAAA,CAAA,SAAA,EAE9B,CAAC,GAAD,IAAA,KAAa;AACX,cAAME,YAAY,GAAG,KAAA,eAAA,CAArB,SAAqB,CAArB;AACA,eAAOA,YAAY,IAAIA,YAAY,CAAC,GAApC,IAAmC,CAAnC;AAJJ,OAAgC,CAAhC;AADFT,KAAAA;AASD;;AAEDU,EAAAA,SAAS,GAAG;AACVV,IAAAA,UAAU,CAAVA,OAAAA,CAAoBO,SAAD,IAAe;AAChC,WAAA,aAAA,CAAA,SAAA,EAAA,MAAA;AADFP,KAAAA;AAGD;;AAEDW,EAAAA,MAAM,GAAG;AACP,WAAA,IAAA;AACD;;AA3C4C;;AA8C/C,eAAeC,cAAc,CAA7B,gBAA6B,CAA7B","sourcesContent":["import * as React from 'react';\nimport withNavigation from './withNavigation';\n\nconst EventNameToPropName = {\n  willFocus: 'onWillFocus',\n  didFocus: 'onDidFocus',\n  willBlur: 'onWillBlur',\n  didBlur: 'onDidBlur',\n};\n\nconst EventNames = Object.keys(EventNameToPropName);\n\nclass NavigationEvents extends React.Component {\n  componentDidMount() {\n    // We register all navigation listeners on mount to ensure listener stability across re-render\n    // A former implementation was replacing (removing/adding) listeners on all update (if prop provided)\n    // but there were issues (see https://github.com/react-navigation/react-navigation/issues/5058)\n    this.subscribeAll();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.navigation !== prevProps.navigation) {\n      this.removeAll();\n      this.subscribeAll();\n    }\n  }\n\n  componentWillUnmount() {\n    this.removeAll();\n  }\n\n  getPropListener = (eventName) => this.props[EventNameToPropName[eventName]];\n\n  subscribeAll() {\n    this.subscriptions = {};\n\n    EventNames.forEach((eventName) => {\n      this.subscriptions[eventName] = this.props.navigation.addListener(\n        eventName,\n        (...args) => {\n          const propListener = this.getPropListener(eventName);\n          return propListener && propListener(...args);\n        }\n      );\n    });\n  }\n\n  removeAll() {\n    EventNames.forEach((eventName) => {\n      this.subscriptions[eventName].remove();\n    });\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport default withNavigation(NavigationEvents);\n"]},"metadata":{},"sourceType":"module"}